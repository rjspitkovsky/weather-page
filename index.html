<h1>Hello, world!</h1>

<h2>This is my weather page app</h2>

  <form class="form" action="index.html" method="post">
    Enter name of city:<input id="cityName" type="text" name="city" value=""><br>
    Enter country:<input id="countryName" type="text" name="country" value=""><br>
    <input type="submit" name="" value="Get Weather">
  </form>

<div id="test">

</div>


<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
<script type="text/javascript">
  const appId = '0ab8b495935072ea06a9032030b224f9'

  Handlebars.registerHelper('convertTemperature', function(number) {
    const temp = (9/5*(number - 273) + 32).toFixed(2)
    return temp
  })

    $(function () {
    $('.form').on('submit', function(event) {
      event.preventDefault();
      const city = document.getElementById("cityName").value
      const country = document.getElementById("countryName").value
       $.get(`http://api.openweathermap.org/data/2.5/weather?q=${city},${country}&APPID=${appId}`, function(data) {
         const template = Handlebars.compile(document.getElementById("weather-template").innerHTML)
         const result = template(data)
         document.getElementById("test").innerHTML = result
       })
     })
   })


</script>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script> -->

<script id="weather-template" type="text/x-handlebars-template">



  <section>
    <h1>{{this.name}}</h1>
    <h3>{{convertTemperature this.main.temp}} degrees</h3>
    {{#each this.weather}}
    <h3>{{description}}</h3>
    <img src="http://openweathermap.org/img/w/{{icon}}.png"></img> 

  </section>
  {{/each}}
</script>
